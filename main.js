!function(){"use strict";var e={717:function(e,t,s){e.exports=s.p+"a086f758840ae814ecde.svg"}},t={};function s(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,s),i.exports}s.p="",function(){var e=s(717);function t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class r{constructor(e,s,r,o,i,n){t(this,"likeCard",(e=>{this._likes=e.likes,this._element.querySelector(".heart").classList.add("heart_active"),this._likesCounter.textContent=e.likes.length})),t(this,"removeLike",(e=>{this._likes=e.likes,this._element.querySelector(".heart").classList.remove("heart_active"),this._likesCounter.textContent=e.likes.length})),this._text=e.name,this._link=e.link,this._id=e._id,this._likes=e.likes,this._likesCount=e.likes.length,this._owner=e.owner._id,this._user=s,this._template=document.getElementById(r),this._handleCardClick=o,this._handleDeleteCard=i,this._handleLikeButton=n}_getCardData(){return this._template.content.querySelector(".photos-grid__card").cloneNode(!0)}isCardLiked(){return this._likes.some((e=>e._id===this._user))}generateCard(){return this._element=this._getCardData(),this._cardPhoto=this._element.querySelector(".photos-grid__photo"),this._cardCaption=this._element.querySelector(".photos-grid__location"),this._likesCounter=this._element.querySelector(".photos-grid__like-counter"),this._trashIcon=this._element.querySelector(".photos-grid__trash"),this._likesCounter.textContent=this._likesCount,this._cardPhoto.src=this._link,this._cardPhoto.alt=this._text,this._cardCaption.textContent=this._text,this._owner!==this._user&&this._trashIcon.classList.add("photos-grid__trash_disables"),this.isCardLiked()&&this._element.querySelector(".heart").classList.add("heart_active"),this._setEventListeners(),this._element}deleteCard(){this._element.remove(),this._element=null}_setEventListeners(){this._element.querySelector(".heart").addEventListener("click",(()=>this._handleLikeButton(this._id))),this._element.querySelector(".photos-grid__trash").addEventListener("click",(()=>this._handleDeleteCard(this._id))),this._element.querySelector(".photos-grid__photo").addEventListener("click",this._handleCardClick)}}class o{constructor(e,t){this._config=e,this._form=document.querySelector(t)}enableValidation(){this._inputList=[...this._form.querySelectorAll(this._config.inputSelector)],this._buttonElement=this._form.querySelector(this._config.submitButtonSelector),this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}resetValidation(){this._inputList.forEach((e=>{this._hideInputError(e),this._toggleButtonState()})),this._form.reset()}_showInputError(e){const t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._config.errorClass)}_hideInputError(e){const t=this._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1)}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class n{constructor(e){i(this,"_handleEscClose",(e=>{"Escape"===e.key&&this._popup.classList.remove("popup_opened")})),i(this,"_handleClickOverlayClose",(e=>{e.target==e.currentTarget&&this.close()})),this._popup=document.querySelector(e)}open(){this._popup.classList.add("popup_opened"),this._popup.addEventListener("mousedown",this._handleClickOverlayClose),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_opened"),this._popup.removeEventListener("mousedown",this._handleClickOverlayClose),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popup.querySelector(".popup__close-button").addEventListener("click",(()=>this.close()))}}class a extends n{constructor(e,t){var s,r;super(e),r=e=>{e.preventDefault();const t=e.target.querySelector(".popup__save-button");t.textContent="Saving...",this._actionsForSubmit(this._getInputValues(),t)},(s="_handleFormSubmit")in this?Object.defineProperty(this,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[s]=r,this._actionsForSubmit=t}_getInputValues(){const e={};return this._popup.querySelectorAll(".popup__input").forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm=this._popup.querySelector(".popup__form"),this._popupForm.addEventListener("submit",this._handleFormSubmit)}close(){this._popupForm.reset(),super.close()}}const _={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_inactive",inputErrorClass:"popup__input_state_error",errorClass:"popup__input-error_active"},c=document.getElementById("profile-avatar-edit"),h=document.querySelector(".profile__edit-button"),u=document.querySelector(".profile__avatar-cover"),p=document.querySelector(".profile__add-button"),l=new class extends n{getMessage(e,t){this._messageField=this._popup.querySelector(e),this._messageField.textContent=t}setEventListeners(){super.setEventListeners(),this._popupForm=this._popup.querySelector(".popup__form"),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this.close()}))}}(".popup_type_error");l.setEventListeners();const d=new class{constructor(e,t){let{baseUrl:s,headers:r,errorFunction:o}=t;this._customFetch=e,this._errorFunction=o,this._baseUrl=s,this._headers=r}getInitialCards(){return this._customFetch("".concat(this._baseUrl,"/cards"),{headers:this._headers},this._errorFunction)}getUserInfo(){return this._customFetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers},this._errorFunction)}updateUserInfo(e){return this._customFetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})},this._errorFunction)}setNewCard(e){return this._customFetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})},this._errorFunction)}deleteCard(e){return this._customFetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers},this._errorFunction)}addLike(e){return this._customFetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers},this._errorFunction)}removeLike(e){return this._customFetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers},this._errorFunction)}setUserAvatar(e){return this._customFetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})},this._errorFunction)}}(((e,t,s)=>fetch(e,t).then((e=>e.ok?e.json():Promise.reject(e.status))).catch((e=>{console.log("error: status code ".concat(e,".")),s("error: status code ".concat(e,"."))}))),{baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"3e63b17a-6497-4226-90cf-4d7937b7aba1","Content-Type":"application/json"},errorFunction:e=>{l.getMessage(".popup__text",e),l.open()}});c.src=e;const m=new class{constructor(e,t,s,r,o,i){this._nameElement=document.querySelector(e),this._jobElement=document.querySelector(t),this._avatarElement=document.querySelector(s),this._formNameInput=document.querySelector(r),this._formJobInput=document.querySelector(o),this._formAvatarInput=document.querySelector(i)}getUserInfo(){return{name:this._nameElement.textContent,about:this._jobElement.textContent}}setUserInfo(e){this._formNameInput.value=e.name,this._formJobInput.value=e.about,this._nameElement.textContent=e.name,this._jobElement.textContent=e.about}setUserAvatar(e){this._avatarElement.style.backgroundImage="url(".concat(e,")")}}(".profile__name",".profile__title",".profile__avatar",".popup__input_type_name",".popup__input_type_job","popup__input_type_avatar-src");let v;Promise.all([d.getUserInfo(),d.getInitialCards()]).then((e=>{let[t,s]=e;v=t._id,m.setUserInfo(t),m.setUserAvatar(t.avatar),k.renderer(s)}));const f=new a(".popup_type_edit-profile",(function(e,t){d.updateUserInfo(e).then((()=>{m.setUserInfo(e),f.close()})).finally((()=>t.textContent="Save"))}));f.setEventListeners();const y=new o(_,".popup__form_type_edit-profile");y.enableValidation(),h.addEventListener("click",(()=>{y.resetValidation(),m.setUserInfo(m.getUserInfo()),f.open()}));const b=new a(".popup_type_edit-avatar",(function(e,t){d.setUserAvatar(e).then((()=>{m.setUserAvatar(e),b.close()})).finally((()=>t.textContent="Save"))}));b.setEventListeners();const g=new o(_,".popup__form_type_edit-avatar");g.enableValidation(),u.addEventListener("click",(()=>{g.resetValidation(),b.open()}));const C=new class extends n{constructor(e,t,s){super(e),this._source=t,this._caption=s}open(e){super.open(),this._source=e.link,this._caption=e.name,this._popupImage=this._popup.querySelector(".picture-popup__popup-image"),this._popupCaption=this._popup.querySelector(".picture-popup__popup-text"),this._popupImage.src=this._source,this._popupImage.alt=this._caption,this._popupCaption.textContent=this._caption}}(".picture-popup"," "," ");C.setEventListeners();const E=new class extends n{getTask(e){this._handleFormSubmit=e}setEventListeners(){super.setEventListeners(),this._popupForm=this._popup.querySelector(".popup__form"),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(),this.close()}))}}(".popup_type_delete-card");E.setEventListeners();const L=e=>{const t=new r(e,v,"card-template",(()=>{C.open(e)}),(e=>{E.open(),E.getTask((()=>{d.deleteCard(e),t.deleteCard()}))}),(e=>{t.isCardLiked()?d.removeLike(e).then((e=>{t.removeLike(e)})):d.addLike(e).then((e=>{t.likeCard(e)}))})),s=t.generateCard();k.addItem(s)},k=new class{constructor(e,t){this._renderItem=e,this._container=document.querySelector(t)}renderer(e){e.forEach((e=>{this._renderItem(e)}))}addItem(e){this._container.prepend(e)}}(L,".photos-grid__list"),S=new a(".popup_type_add-card",(function(e,t){d.setNewCard(e).then((e=>{L(e),S.close()})).finally((()=>t.textContent="Create"))}));S.setEventListeners(),p.addEventListener("click",(()=>{I.resetValidation(),S.open()}));const I=new o(_,".popup__form_type_add-card");I.enableValidation()}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxFQUFJc0IsV0FBV0YsR0FBUVEsTUFBTUMsSUFDM0J1RCxFQUFVOUQsV0FBV08sTUFHdkI3QixFQUFJcUIsUUFBUUQsR0FBUVEsTUFBTUMsSUFDeEJ1RCxFQUFVQyxTQUFTeEQsU0FLckJ5RCxFQUFtQkYsRUFBVTlKLGVBQ25DMEksRUFBVXVCLFFBQVFELElBSWR0QixFQUFZLElNbEtILE1BQ2JoTCxZQUFZd00sRUFBWUMsR0FDdEJsTSxLQUFLbU0sWUFBY0YsRUFDbkJqTSxLQUFLb00sV0FBYS9LLFNBQVNqQixjQUFjOEwsR0FFM0N4QixTQUFTMkIsR0FDUEEsRUFBTS9JLFNBQVNnSixJQUNidE0sS0FBS21NLFlBQVlHLE1BR3JCTixRQUFRTyxHQUNOdk0sS0FBS29NLFdBQVdJLFFBQVFELEtOdUpFWixFQUFZLHNCQUdwQ2MsRUFBbUIsSUFBSXRILEVEbklELHdCQ3VJNUIsU0FBaUNNLEVBQVlILEdBQzNDbUIsRUFDR2tCLFdBQVdsQyxHQUNYNEMsTUFBTUMsSUFDTHFELEVBQVdyRCxHQUNYbUUsRUFBaUI1SCxXQUVsQitGLFNBQVEsSUFBT3RGLEVBQWE5RSxZQUFjLGNBVi9DaU0sRUFBaUJ2SCxvQkFvQmpCaUIsRUFBYzVELGlCQUFpQixTQU5QLEtBQ3RCbUssRUFBcUJySixrQkFDckJvSixFQUFpQjNILFVBT25CLE1BQU00SCxFQUF1QixJQUFJbEssRUFBY3NELEVEekpwQiw4QkMwSjNCNEcsRUFBcUI3SixtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoTWVzc2FnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCIvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2FyZCBHZW5lcmF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCB1c2VyLCB0ZW1wbGF0ZSwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVEZWxldGVDYXJkLCBoYW5kbGVMaWtlQnV0dG9uKSB7XG4gICAgdGhpcy5fdGV4dCA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xuICAgIHRoaXMuX2xpa2VzQ291bnQgPSBkYXRhLmxpa2VzLmxlbmd0aDtcbiAgICB0aGlzLl9vd25lciA9IGRhdGEub3duZXIuX2lkO1xuICAgIHRoaXMuX3VzZXIgPSB1c2VyO1xuICAgIHRoaXMuX3RlbXBsYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGVtcGxhdGUpO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkID0gaGFuZGxlRGVsZXRlQ2FyZDtcbiAgICB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uID0gaGFuZGxlTGlrZUJ1dHRvbjtcbiAgfVxuXG4gIC8vIGNsb25pbmcgbmV3IGNhcmQgZnJvbSB0ZW1wbGF0ZSBhbmQgYWRkaW5nIHRoZSBpbmZvIGZyb20gaW5wdXRcbiAgX2dldENhcmREYXRhKCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gdGhpcy5fdGVtcGxhdGUuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3Rvcy1ncmlkX19jYXJkXCIpLmNsb25lTm9kZSh0cnVlKTtcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICAvLyBjaGVjayBpZiBjYXJkIGlzIGxpa2Ugd2hlbiBjbGlja2luZyBvbiB0aGUgbGlrZSBpY29uXG4gIGlzQ2FyZExpa2VkKCkge1xuICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKCh1c2VyKSA9PiB1c2VyLl9pZCA9PT0gdGhpcy5fdXNlcik7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldENhcmREYXRhKCk7XG4gICAgdGhpcy5fY2FyZFBob3RvID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3Rvcy1ncmlkX19waG90b1wiKTtcbiAgICB0aGlzLl9jYXJkQ2FwdGlvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5waG90b3MtZ3JpZF9fbG9jYXRpb25cIik7XG4gICAgdGhpcy5fbGlrZXNDb3VudGVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3Rvcy1ncmlkX19saWtlLWNvdW50ZXJcIik7XG4gICAgdGhpcy5fdHJhc2hJY29uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3Rvcy1ncmlkX190cmFzaFwiKTtcbiAgICB0aGlzLl9saWtlc0NvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlc0NvdW50O1xuICAgIHRoaXMuX2NhcmRQaG90by5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRQaG90by5hbHQgPSB0aGlzLl90ZXh0O1xuICAgIHRoaXMuX2NhcmRDYXB0aW9uLnRleHRDb250ZW50ID0gdGhpcy5fdGV4dDtcbiAgICBpZiAodGhpcy5fb3duZXIgIT09IHRoaXMuX3VzZXIpIHtcbiAgICAgIHRoaXMuX3RyYXNoSWNvbi5jbGFzc0xpc3QuYWRkKFwicGhvdG9zLWdyaWRfX3RyYXNoX2Rpc2FibGVzXCIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5pc0NhcmRMaWtlZCgpKSB7XG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhcnRcIikuY2xhc3NMaXN0LmFkZChcImhlYXJ0X2FjdGl2ZVwiKTtcbiAgICB9XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuXG4gIC8vIGhhbmRsZSBkZWxldGUgZnVuY3Rpb25cbiAgZGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgIC8vIHJlbW92ZSB0aGUgbGluayB0byB0aGUgRE9NIGVsZW1lbnQ6XG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gIH1cblxuICAvLyBhZGQgZXZlbnQgbGlzdGVuZXJzXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhcnRcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUxpa2VCdXR0b24odGhpcy5faWQpKTtcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9zLWdyaWRfX3RyYXNoXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKHRoaXMuX2lkKSk7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3Rvcy1ncmlkX19waG90b1wiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2FyZENsaWNrKTtcbiAgfVxuXG4gIC8vIG1hcmsgbGlrZSBpY29uIGFuZCB1cGRhdGUgbGlrZSBjb3VudGVyXG4gIGxpa2VDYXJkID0gKGRhdGEpID0+IHtcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYXJ0XCIpLmNsYXNzTGlzdC5hZGQoXCJoZWFydF9hY3RpdmVcIik7XG4gICAgdGhpcy5fbGlrZXNDb3VudGVyLnRleHRDb250ZW50ID0gZGF0YS5saWtlcy5sZW5ndGg7XG4gIH07XG5cbiAgLy8gcmVtb3ZlIGxpa2UgaWNvbiBhbmQgdXBkYXRlIGxpa2UgY291bnRlclxuICByZW1vdmVMaWtlID0gKGRhdGEpID0+IHtcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYXJ0XCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJoZWFydF9hY3RpdmVcIik7XG4gICAgdGhpcy5fbGlrZXNDb3VudGVyLnRleHRDb250ZW50ID0gZGF0YS5saWtlcy5sZW5ndGg7XG4gIH07XG59XG4iLCIvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRm9ybSB2YWxpZGF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm0pIHtcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5fZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZm9ybSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIC8vIHNldHRpbmcgYW4gYXJyYXkgb2YgYWxsIGlucHV0IGZpZWxkcyBvZiBhIGdpdmVuIGZvcm1cbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKV07XG5cbiAgICAvLyBkZWNsYXJpbmcgdGhlIHN1Ym1pdCBidXR0b24gb2YgYSBnaXZlbiBmb3JtXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICAvLyBhZGQgdGhlIGFiaWxpdHkgdG8gcmVzZXQgdGhlIHZhbGlkYXRpb24gYmV0d2VlbiBzZXNzaW9uc1xuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICB9XG5cbiAgLy8gcHJvbXB0aW5nIGVycm9yIG1lc3NhZ2Ugd2l0aCBpdHMgc3R5bGUgcGVyIGZvcm0gYW5kIGlucHV0IGZpZWxkXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xuICB9XG5cbiAgLy8gcmVtb3ZpbmcgdGhlIGVycm9yIG1lc3NhZ2VcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG5cbiAgLy8gY2hlY2tpbmcgdGhlIHZhbGlkaXR5IG9mIHNwZWNpZmljIGlucHV0XG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgLy8gY2hlY2tpbmcgdGhlIHZhbGlkaXR5IG9mIGVudGlyZSBmb3JtXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xuICB9XG5cbiAgLy8gdG9nZ2xpbmcgdGhlIHN1Ym1pdCBidXR0b24gYWN0aXZlIG9mIGluYWN0aXZlLCB0byBiZSB1c2VkIGJhc2VkIG9uIGZvcm0gdmFsaWRpdHlcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8vIGEgZnVuY3Rpb24gdG8gYWRkIGV2ZW50IGxpc3RlbmVyIGZvciBldmVyeSBmb3IgaW5wdXQgZmllbGQgaW4gdGhlIHBhZ2VcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vIHNldHRpbmcgdGhlIGluaXRpYWwgc3RhdGUgb2YgdGhlIHN1Ym1pdCBidXR0b24gKHdpbGwgYmUgc2V0IHRvIGluYWN0aXZlKVxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICAvLyBzZXR0aW5nIGV2ZW50IGxpc3RlbmVyIGZvciBldmVyeSBpbnB1dCBmaWVsZCB0byB0ZXN0IHZhbGlkaXR5IGFuZCByZXNwb25kIGFjY29yZGluZ2x5XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcbiAgICB9XG4gIH07XG5cbiAgX2hhbmRsZUNsaWNrT3ZlcmxheUNsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQudGFyZ2V0ID09IGV2dC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZUNsaWNrT3ZlcmxheUNsb3NlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgIHRoaXMuX3BvcHVwLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlQ2xpY2tPdmVybGF5Q2xvc2UpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBhY3Rpb25zRm9yU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fYWN0aW9uc0ZvclN1Ym1pdCA9IGFjdGlvbnNGb3JTdWJtaXQ7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgZm9ybVZhbHVlcyA9IHt9O1xuICAgIGNvbnN0IGlucHV0cyA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpO1xuICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBmb3JtVmFsdWVzO1xuICB9XG5cbiAgX2hhbmRsZUZvcm1TdWJtaXQgPSAoZXZ0KSA9PiB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gZXZ0LnRhcmdldC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zYXZlLWJ1dHRvblwiKTtcbiAgICBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xuICAgIHRoaXMuX2FjdGlvbnNGb3JTdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSwgc3VibWl0QnV0dG9uKTtcbiAgfTtcblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG59XG4iLCIvLyBkZWZhdWx0IGZvcm0gc2VsZWN0b3JzIGNvbmZpZ3VyYXRpb24sIHRvIGJlIHVzZWQgYnkgZm9ybS12YWxpZGF0b3JcbmV4cG9ydCBjb25zdCBmb3JtQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX3NhdmUtYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX3NhdmUtYnV0dG9uX2luYWN0aXZlXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfc3RhdGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXG59O1xuXG5leHBvcnQgY29uc3QgY3VzdG9tRmV0Y2ggPSAodXJsLCBoZWFkZXJzLCBlcnJvckZ1bmN0aW9uKSA9PlxuICBmZXRjaCh1cmwsIGhlYWRlcnMpXG4gICAgLnRoZW4oKHJlcykgPT4gKHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChyZXMuc3RhdHVzKSkpXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGBlcnJvcjogc3RhdHVzIGNvZGUgJHtlcnJ9LmApO1xuICAgICAgZXJyb3JGdW5jdGlvbihgZXJyb3I6IHN0YXR1cyBjb2RlICR7ZXJyfS5gKTtcbiAgICB9KTtcblxuZXhwb3J0IGNvbnN0IHBvcHVwRXJyb3JTZWxlY3RvciA9IFwiLnBvcHVwX3R5cGVfZXJyb3JcIjtcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZVNlbGVjdG9yID0gXCIucHJvZmlsZV9fbmFtZVwiO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZVNlbGVjdG9yID0gXCIucHJvZmlsZV9fdGl0bGVcIjtcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyU2VsZWN0b3IgPSBcIi5wcm9maWxlX19hdmF0YXJcIjtcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBcIi5wb3B1cF9faW5wdXRfdHlwZV9uYW1lXCI7XG5leHBvcnQgY29uc3Qgam9iSW5wdXQgPSBcIi5wb3B1cF9faW5wdXRfdHlwZV9qb2JcIjtcbmV4cG9ydCBjb25zdCBhdmF0YXJJbnB1dCA9IFwicG9wdXBfX2lucHV0X3R5cGVfYXZhdGFyLXNyY1wiO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXJFZGl0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9maWxlLWF2YXRhci1lZGl0XCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBcIi5wb3B1cF90eXBlX2VkaXQtcHJvZmlsZVwiO1xuZXhwb3J0IGNvbnN0IGZvcm1FZGl0UHJvZmlsZSA9IFwiLnBvcHVwX19mb3JtX3R5cGVfZWRpdC1wcm9maWxlXCI7XG5leHBvcnQgY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgcG9wdXBFZGl0QXZhdGFyID0gXCIucG9wdXBfdHlwZV9lZGl0LWF2YXRhclwiO1xuZXhwb3J0IGNvbnN0IGZvcm1FZGl0QXZhdGFyID0gXCIucG9wdXBfX2Zvcm1fdHlwZV9lZGl0LWF2YXRhclwiO1xuZXhwb3J0IGNvbnN0IGF2YXRhckVkaXRBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItY292ZXJcIik7XG5leHBvcnQgY29uc3QgcG9wdXBDYXJkID0gXCIucGljdHVyZS1wb3B1cFwiO1xuZXhwb3J0IGNvbnN0IHBvcHVwRGVsZXRlQ2FyZFNlbGVjdG9yID0gXCIucG9wdXBfdHlwZV9kZWxldGUtY2FyZFwiO1xuZXhwb3J0IGNvbnN0IHBvcHVwQWRkQ2FyZCA9IFwiLnBvcHVwX3R5cGVfYWRkLWNhcmRcIjtcbmV4cG9ydCBjb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuZXhwb3J0IGNvbnN0IGZvcm1BZGRDYXJkID0gXCIucG9wdXBfX2Zvcm1fdHlwZV9hZGQtY2FyZFwiO1xuIiwiLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICBpbXBvcnRpbmcgZWxlbWVudHMgYW5kIGNsYXNzZXMgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IHByb2ZpbGVBdmF0YXJFZGl0U291cmNlIGZyb20gXCIuLi9pbWFnZXMvZWRpdF9pY29uLnN2Z1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aE1lc3NhZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoTWVzc2FnZS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuaW1wb3J0IHsgZm9ybUNvbmZpZywgY3VzdG9tRmV0Y2gsIHBvcHVwRXJyb3JTZWxlY3RvciwgcHJvZmlsZU5hbWVTZWxlY3RvciwgcHJvZmlsZVRpdGxlU2VsZWN0b3IsIHByb2ZpbGVBdmF0YXJTZWxlY3RvciwgbmFtZUlucHV0LCBqb2JJbnB1dCwgYXZhdGFySW5wdXQsIHByb2ZpbGVBdmF0YXJFZGl0LCBwb3B1cEVkaXRQcm9maWxlLCBmb3JtRWRpdFByb2ZpbGUsIGVkaXRCdXR0b24sIHBvcHVwRWRpdEF2YXRhciwgZm9ybUVkaXRBdmF0YXIsIGF2YXRhckVkaXRBcmVhLCBwb3B1cENhcmQsIHBvcHVwRGVsZXRlQ2FyZFNlbGVjdG9yLCBwb3B1cEFkZENhcmQsIGFkZENhcmRCdXR0b24sIGZvcm1BZGRDYXJkIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG4vLyBzZXR0aW5nIHVwIHRoZSBwb3B1cCBmb3IgZXJyb3IgbWVzc2FnZVxuY29uc3QgcG9wdXBFcnJvciA9IG5ldyBQb3B1cFdpdGhNZXNzYWdlKHBvcHVwRXJyb3JTZWxlY3Rvcik7XG5wb3B1cEVycm9yLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIHNldHRpbmcgdXAgdGhlIEFQSSBmb3IgY3VycmVudCB1c2VyXG5jb25zdCBhcGkgPSBuZXcgQXBpKGN1c3RvbUZldGNoLCB7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCIzZTYzYjE3YS02NDk3LTQyMjYtOTBjZi00ZDc5MzdiN2FiYTFcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbiAgZXJyb3JGdW5jdGlvbjogKGVyck1lc3NhZ2UpID0+IHtcbiAgICBwb3B1cEVycm9yLmdldE1lc3NhZ2UoXCIucG9wdXBfX3RleHRcIiwgZXJyTWVzc2FnZSk7XG4gICAgcG9wdXBFcnJvci5vcGVuKCk7XG4gIH0sXG59KTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2ZpbGUgc2VjdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4vLyBzZXR0aW5nIHVwIHRoZSBpbml0aWFsIHByb2ZpbGUgaW5mb1xucHJvZmlsZUF2YXRhckVkaXQuc3JjID0gcHJvZmlsZUF2YXRhckVkaXRTb3VyY2U7XG5cbmNvbnN0IHVzZXJQcm9maWxlID0gbmV3IFVzZXJJbmZvKHByb2ZpbGVOYW1lU2VsZWN0b3IsIHByb2ZpbGVUaXRsZVNlbGVjdG9yLCBwcm9maWxlQXZhdGFyU2VsZWN0b3IsIG5hbWVJbnB1dCwgam9iSW5wdXQsIGF2YXRhcklucHV0KTtcbmxldCB1c2VySWQ7XG5cbi8vIGxvYWRpbmcgdGhlIHBhZ2UgYXQgb25jZTogc2V0dGluZyB1cCBwcm9maWxlIGluZm8gZnJvbSB0aGUgc2VydmVyIGFuZCByZW5kZXJpbmcgdGhlIGluaXRpYWwgY2FyZHNcblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm8oKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSkudGhlbigoW3VzZXJJbmZvLCBpbml0aWFsQ2FyZHNdKSA9PiB7XG4gIC8vIHNldHRpbmcgdXAgcHJvZmlsZSBpbmZvIGZyb20gdGhlIHNlcnZlclxuICB1c2VySWQgPSB1c2VySW5mby5faWQ7XG4gIHVzZXJQcm9maWxlLnNldFVzZXJJbmZvKHVzZXJJbmZvKTtcbiAgdXNlclByb2ZpbGUuc2V0VXNlckF2YXRhcih1c2VySW5mby5hdmF0YXIpO1xuXG4gIC8vIHJlbmRlcmluZyB0aGUgaW5pdGlhbCBjYXJkc1xuICBjYXJkc0xpc3QucmVuZGVyZXIoaW5pdGlhbENhcmRzKTtcbn0pO1xuXG4vLyBzZXR0aW5nIHVwIHRoZSBwb3B1cC1mb3JtIGZvciBlZGl0aW5nIHRoZSBwcm9maWxlXG5jb25zdCBwb3B1cEVkaXRQcm9maWxlRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwRWRpdFByb2ZpbGUsIGhhbmRsZUVkaXRQcm9maWxlRm9ybVN1Ym1pdCk7XG5wb3B1cEVkaXRQcm9maWxlRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyBkZWNsYXJlIHRoZSBmdWN0aW9uIGZvciBoYW5kbGluZyBzdWJtaXQgZm9yIGVkaXRpbmcgYXZhdGFyIGZvcm1cbmZ1bmN0aW9uIGhhbmRsZUVkaXRQcm9maWxlRm9ybVN1Ym1pdChmb3JtVmFsdWVzLCBzdWJtaXRCdXR0b24pIHtcbiAgYXBpXG4gICAgLnVwZGF0ZVVzZXJJbmZvKGZvcm1WYWx1ZXMpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgdXNlclByb2ZpbGUuc2V0VXNlckluZm8oZm9ybVZhbHVlcyk7XG4gICAgICBwb3B1cEVkaXRQcm9maWxlRm9ybS5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4gKHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiKSk7XG59XG5cbi8vIGhhbmRsZSBlZGl0LXByb2ZpbGUgZm9ybSBtb2RhbCBvcGVuXG5jb25zdCBvcGVuRWRpdFByb2ZpbGVGb3JtID0gKCkgPT4ge1xuICBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIHVzZXJQcm9maWxlLnNldFVzZXJJbmZvKHVzZXJQcm9maWxlLmdldFVzZXJJbmZvKCkpO1xuICBwb3B1cEVkaXRQcm9maWxlRm9ybS5vcGVuKCk7XG59O1xuXG4vLyBlbmFibGluZyB2YWxpZGF0aW9uIGZvciBlZGl0LXByb2ZpbGUgZm9ybVxuY29uc3QgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUNvbmZpZywgZm9ybUVkaXRQcm9maWxlKTtcbmVkaXRQcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbi8vIGV2ZW50IGxpc3RlbmVycyBmb3IgcHJvbXB0aW5nIHByb2ZpbGUtZWRpdCBwb3B1cCB3aGVuIGNsaWNraW5nIHRoZSBlZGl0IGljb25cbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5FZGl0UHJvZmlsZUZvcm0pO1xuXG4vLyBzZXR0aW5nIHVwIHRoZSBwb3B1cC1mb3JtIGZvciBlZGl0aW5nIHRoZSBhdmF0YXJcbmNvbnN0IHBvcHVwRWRpdEF2YXRhckZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEVkaXRBdmF0YXIsIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQpO1xucG9wdXBFZGl0QXZhdGFyRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyBkZWNsYXJlIHRoZSBmdWN0aW9uIGZvciBoYW5kbGluZyBzdWJtaXQgZm9yIGVkaXRpbmcgYXZhdGFyIGZvcm1cbmZ1bmN0aW9uIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQoYXZhdGFyVXJsLCBzdWJtaXRCdXR0b24pIHtcbiAgYXBpXG4gICAgLnNldFVzZXJBdmF0YXIoYXZhdGFyVXJsKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHVzZXJQcm9maWxlLnNldFVzZXJBdmF0YXIoYXZhdGFyVXJsKTtcbiAgICAgIHBvcHVwRWRpdEF2YXRhckZvcm0uY2xvc2UoKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IChzdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIikpO1xufVxuXG4vLyBoYW5kbGUgZWRpdC1hdmF0YXIgZm9ybSBtb2RhbCBvcGVuXG5jb25zdCBvcGVuRWRpdEF2YXRhckZvcm0gPSAoKSA9PiB7XG4gIGVkaXRBdmF0YXJGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBwb3B1cEVkaXRBdmF0YXJGb3JtLm9wZW4oKTtcbn07XG5cbi8vIGVuYWJsaW5nIHZhbGlkYXRpb24gZm9yIGVkaXQtYXZhdGFyIGZvcm1cbmNvbnN0IGVkaXRBdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUNvbmZpZywgZm9ybUVkaXRBdmF0YXIpO1xuZWRpdEF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vLyBldmVudCBsaXN0ZW5lcnMgZm9yIHByb21wdGluZyBhdmF0YXItZWRpdCBwb3B1cCB3aGVuIGNsaWNraW5nIHRoZSBlZGl0IGljb25cbmF2YXRhckVkaXRBcmVhLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuRWRpdEF2YXRhckZvcm0pO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRzIHNlY3Rpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbi8vIHNldHRpbmcgdXAgdGhlIGluaXRpYWwgaW1hZ2UgcG9wdXBcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBDYXJkLCBcIiBcIiwgXCIgXCIpO1xuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyBzZXR0aW5nIHVwIHRoZSBpbml0aWFsIGRlbGV0ZS1jYXJkIHBvcHVwXG5jb25zdCBwb3B1cERlbGV0ZUNhcmQgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKHBvcHVwRGVsZXRlQ2FyZFNlbGVjdG9yKTtcbnBvcHVwRGVsZXRlQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyBmdW5jdGlvbiB0byByZW5kZXIgYSBuZXcgY2FyZCBmcm9tIGdpdmVuIGRhdGFcbmNvbnN0IHJlbmRlckNhcmQgPSAoY2FyZEl0ZW0pID0+IHtcbiAgY29uc3QgcGxhY2VDYXJkID0gbmV3IENhcmQoXG4gICAgY2FyZEl0ZW0sXG4gICAgdXNlcklkLFxuICAgIFwiY2FyZC10ZW1wbGF0ZVwiLFxuICAgIC8vIGZ1bmN0aW9uIHRvIGJlIHBlcmZvcm1lZCB3aGVuIGNsaWNraW5nIG9uIHRoZSBuZXcgY2FyZDpcbiAgICAoKSA9PiB7XG4gICAgICBpbWFnZVBvcHVwLm9wZW4oY2FyZEl0ZW0pO1xuICAgIH0sXG4gICAgLy8gZnVuY3Rpb24gdG8gYmUgcGVyZm9ybWVkIHdoZW4gY2xpY2tpbmcgb24gdGhlIGJpbiBpY29uIG9mIHRoZSBuZXcgY2FyZDpcbiAgICAoY2FyZElkKSA9PiB7XG4gICAgICBwb3B1cERlbGV0ZUNhcmQub3BlbigpO1xuICAgICAgLy8gZnVuY3Rpb24gdG8gYmUgcGVyZm9ybWVkIHdoZW4gYXBwcm92aW5nIHRoZSBwb3B1cCBmb3IgZGVsZXRpbmcgdGhlIG5ldyBjYXJkOlxuICAgICAgcG9wdXBEZWxldGVDYXJkLmdldFRhc2soKCkgPT4ge1xuICAgICAgICBhcGkuZGVsZXRlQ2FyZChjYXJkSWQpO1xuICAgICAgICBwbGFjZUNhcmQuZGVsZXRlQ2FyZCgpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBmdW5jdGlvbiB0byBiZSBwZXJmb3JtZWQgd2hlbiBjbGlja2luZyBvbiB0aGUgbGlrZSBpY29uIG9mIHRoZSBuZXcgY2FyZDpcbiAgICAoY2FyZElkKSA9PiB7XG4gICAgICBjb25zdCBpc0xpa2VkID0gcGxhY2VDYXJkLmlzQ2FyZExpa2VkKCk7XG4gICAgICBpZiAoaXNMaWtlZCkge1xuICAgICAgICBhcGkucmVtb3ZlTGlrZShjYXJkSWQpLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgIHBsYWNlQ2FyZC5yZW1vdmVMaWtlKHJlcyk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXBpLmFkZExpa2UoY2FyZElkKS50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICBwbGFjZUNhcmQubGlrZUNhcmQocmVzKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICApO1xuICBjb25zdCBwbGFjZUNhcmRFbGVtZW50ID0gcGxhY2VDYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICBjYXJkc0xpc3QuYWRkSXRlbShwbGFjZUNhcmRFbGVtZW50KTtcbn07XG5cbi8vIHNldHRpbmcgdXAgdGhlIGNhcmRzIGxpc3Qgc2VjdGlvblxuY29uc3QgY2FyZHNMaXN0ID0gbmV3IFNlY3Rpb24ocmVuZGVyQ2FyZCwgXCIucGhvdG9zLWdyaWRfX2xpc3RcIik7XG5cbi8vIHNldHRpbmcgdXAgdGhlIHBvcHVwLWZvcm0gZm9yIHJlbmRlcmluZyBuZXcgY2FyZHNcbmNvbnN0IHBvcHVwQWRkQ2FyZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEFkZENhcmQsIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KTtcbnBvcHVwQWRkQ2FyZEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gZGVjbGFyZSB0aGUgZnVjdGlvbiBmb3IgaGFuZGxpbmcgc3VibWl0IGZvciBhZGRpbmcgY2FyZCBmb3JtXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdChmb3JtVmFsdWVzLCBzdWJtaXRCdXR0b24pIHtcbiAgYXBpXG4gICAgLnNldE5ld0NhcmQoZm9ybVZhbHVlcylcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICByZW5kZXJDYXJkKHJlcyk7XG4gICAgICBwb3B1cEFkZENhcmRGb3JtLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiAoc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJDcmVhdGVcIikpO1xufVxuXG4vLyBoYW5kbGUgYWRkLWNhcmQgZm9ybSBtb2RhbCBvcGVuXG5jb25zdCBvcGVuQWRkQ2FyZEZvcm0gPSAoKSA9PiB7XG4gIGFkZENhcmRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBwb3B1cEFkZENhcmRGb3JtLm9wZW4oKTtcbn07XG5cbi8vIGV2ZW50IGxpc3RlbmVycyBmb3IgcHJvbXB0aW5nIGFkZC1jYXJkIHBvcHVwIHdoZW4gY2xpY2tpbmcgdGhlIGFkZCBpY29uXG5hZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuQWRkQ2FyZEZvcm0pO1xuXG4vLyBlbmFibGluZyB2YWxpZGF0aW9uIGZvciBhZGQtY2FyZCBmb3JtXG5jb25zdCBhZGRDYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm1Db25maWcsIGZvcm1BZGRDYXJkKTtcbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoTWVzc2FnZSBleHRlbmRzIFBvcHVwIHtcbiAgZ2V0TWVzc2FnZShtZXNzYWdlRmllbGQsIG1lc3NhZ2UpIHtcbiAgICB0aGlzLl9tZXNzYWdlRmllbGQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKG1lc3NhZ2VGaWVsZCk7XG4gICAgdGhpcy5fbWVzc2FnZUZpZWxkLnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoY3VzdG9tRmV0Y2gsIHsgYmFzZVVybCwgaGVhZGVycywgZXJyb3JGdW5jdGlvbiB9KSB7XG4gICAgdGhpcy5fY3VzdG9tRmV0Y2ggPSBjdXN0b21GZXRjaDtcbiAgICB0aGlzLl9lcnJvckZ1bmN0aW9uID0gZXJyb3JGdW5jdGlvbjtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gdGhpcy5fY3VzdG9tRmV0Y2goXG4gICAgICBgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsXG4gICAgICB7XG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICB9LFxuICAgICAgdGhpcy5fZXJyb3JGdW5jdGlvblxuICAgICk7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gdGhpcy5fY3VzdG9tRmV0Y2goXG4gICAgICBgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsXG4gICAgICB7XG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICB9LFxuICAgICAgdGhpcy5fZXJyb3JGdW5jdGlvblxuICAgICk7XG4gIH1cblxuICB1cGRhdGVVc2VySW5mbyh1c2VyRGF0YSkge1xuICAgIHJldHVybiB0aGlzLl9jdXN0b21GZXRjaChcbiAgICAgIGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBuYW1lOiB1c2VyRGF0YS5uYW1lLFxuICAgICAgICAgIGFib3V0OiB1c2VyRGF0YS5hYm91dCxcbiAgICAgICAgfSksXG4gICAgICB9LFxuICAgICAgdGhpcy5fZXJyb3JGdW5jdGlvblxuICAgICk7XG4gIH1cblxuICBzZXROZXdDYXJkKGNhcmREYXRhKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1c3RvbUZldGNoKFxuICAgICAgYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgbmFtZTogY2FyZERhdGEubmFtZSxcbiAgICAgICAgICBsaW5rOiBjYXJkRGF0YS5saW5rLFxuICAgICAgICB9KSxcbiAgICAgIH0sXG4gICAgICB0aGlzLl9lcnJvckZ1bmN0aW9uXG4gICAgKTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1c3RvbUZldGNoKFxuICAgICAgYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgfSxcbiAgICAgIHRoaXMuX2Vycm9yRnVuY3Rpb25cbiAgICApO1xuICB9XG5cbiAgYWRkTGlrZShjYXJkSWQpIHtcbiAgICByZXR1cm4gdGhpcy5fY3VzdG9tRmV0Y2goXG4gICAgICBgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLFxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICB9LFxuICAgICAgdGhpcy5fZXJyb3JGdW5jdGlvblxuICAgICk7XG4gIH1cblxuICByZW1vdmVMaWtlKGNhcmRJZCkge1xuICAgIHJldHVybiB0aGlzLl9jdXN0b21GZXRjaChcbiAgICAgIGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIH0sXG4gICAgICB0aGlzLl9lcnJvckZ1bmN0aW9uXG4gICAgKTtcbiAgfVxuXG4gIHNldFVzZXJBdmF0YXIoYXZhdGFyTGluaykge1xuICAgIHJldHVybiB0aGlzLl9jdXN0b21GZXRjaChcbiAgICAgIGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgYXZhdGFyOiBhdmF0YXJMaW5rLmF2YXRhcixcbiAgICAgICAgfSksXG4gICAgICB9LFxuICAgICAgdGhpcy5fZXJyb3JGdW5jdGlvblxuICAgICk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IodXNlck5hbWVTZWxlY3RvciwgdXNlckpvYlNlbGVjdG9yLCB1c2VyQXZhdGFyU2VsZWN0b3IsIGZvcm1OYW1lSW5wdXQsIGZvcm1Kb2JJbnB1dCwgZm9ybUF2YXRhcklucHV0KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX2pvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJKb2JTZWxlY3Rvcik7XG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckF2YXRhclNlbGVjdG9yKTtcbiAgICB0aGlzLl9mb3JtTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihmb3JtTmFtZUlucHV0KTtcbiAgICB0aGlzLl9mb3JtSm9iSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvcm1Kb2JJbnB1dCk7XG4gICAgdGhpcy5fZm9ybUF2YXRhcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihmb3JtQXZhdGFySW5wdXQpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgY29uc3QgdXNlckRhdGEgPSB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGFib3V0OiB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50LFxuICAgIH07XG4gICAgcmV0dXJuIHVzZXJEYXRhO1xuICB9XG5cbiAgc2V0VXNlckluZm8obmV3VXNlckRhdGEpIHtcbiAgICB0aGlzLl9mb3JtTmFtZUlucHV0LnZhbHVlID0gbmV3VXNlckRhdGEubmFtZTtcbiAgICB0aGlzLl9mb3JtSm9iSW5wdXQudmFsdWUgPSBuZXdVc2VyRGF0YS5hYm91dDtcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5ld1VzZXJEYXRhLm5hbWU7XG4gICAgdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCA9IG5ld1VzZXJEYXRhLmFib3V0O1xuICB9XG5cbiAgc2V0VXNlckF2YXRhcihhdmF0YXJVcmwpIHtcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50LnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHthdmF0YXJVcmx9KWA7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIHNvdXJjZSwgY2FwdGlvbikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3NvdXJjZSA9IHNvdXJjZTtcbiAgICB0aGlzLl9jYXB0aW9uID0gY2FwdGlvbjtcbiAgfVxuICBvcGVuKG5ld1BvcHVwSW1hZ2UpIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgdGhpcy5fc291cmNlID0gbmV3UG9wdXBJbWFnZS5saW5rO1xuICAgIHRoaXMuX2NhcHRpb24gPSBuZXdQb3B1cEltYWdlLm5hbWU7XG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucGljdHVyZS1wb3B1cF9fcG9wdXAtaW1hZ2VcIik7XG4gICAgdGhpcy5fcG9wdXBDYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5waWN0dXJlLXBvcHVwX19wb3B1cC10ZXh0XCIpO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gdGhpcy5fc291cmNlO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gdGhpcy5fY2FwdGlvbjtcbiAgICB0aGlzLl9wb3B1cENhcHRpb24udGV4dENvbnRlbnQgPSB0aGlzLl9jYXB0aW9uO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcbiAgZ2V0VGFzayh0YXNrKSB7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IHRhc2s7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KCk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3RvcihyZW5kZXJJdGVtLCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlckl0ZW0gPSByZW5kZXJJdGVtO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG4gIHJlbmRlcmVyKGl0ZW1zKSB7XG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVySXRlbShpdGVtKTtcbiAgICB9KTtcbiAgfVxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwicCIsIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJ1c2VyIiwidGVtcGxhdGUiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVEZWxldGVDYXJkIiwiaGFuZGxlTGlrZUJ1dHRvbiIsInRoaXMiLCJfbGlrZXMiLCJsaWtlcyIsIl9lbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImNsYXNzTGlzdCIsImFkZCIsIl9saWtlc0NvdW50ZXIiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsInJlbW92ZSIsIl90ZXh0IiwibmFtZSIsIl9saW5rIiwibGluayIsIl9pZCIsIl9saWtlc0NvdW50IiwiX293bmVyIiwib3duZXIiLCJfdXNlciIsIl90ZW1wbGF0ZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9nZXRDYXJkRGF0YSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJpc0NhcmRMaWtlZCIsInNvbWUiLCJnZW5lcmF0ZUNhcmQiLCJfY2FyZFBob3RvIiwiX2NhcmRDYXB0aW9uIiwiX3RyYXNoSWNvbiIsInNyYyIsImFsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsImRlbGV0ZUNhcmQiLCJhZGRFdmVudExpc3RlbmVyIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm0iLCJfY29uZmlnIiwiX2Zvcm0iLCJlbmFibGVWYWxpZGF0aW9uIiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiX2J1dHRvbkVsZW1lbnQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImV2dCIsInByZXZlbnREZWZhdWx0IiwicmVzZXRWYWxpZGF0aW9uIiwiZm9yRWFjaCIsImlucHV0RWxlbWVudCIsIl9oaWRlSW5wdXRFcnJvciIsIl90b2dnbGVCdXR0b25TdGF0ZSIsInJlc2V0IiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJpbnB1dEVycm9yQ2xhc3MiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yQ2xhc3MiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJrZXkiLCJfcG9wdXAiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiY2xvc2UiLCJvcGVuIiwiX2hhbmRsZUNsaWNrT3ZlcmxheUNsb3NlIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXBXaXRoRm9ybSIsImFjdGlvbnNGb3JTdWJtaXQiLCJzdXBlciIsInN1Ym1pdEJ1dHRvbiIsIl9hY3Rpb25zRm9yU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJmb3JtQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwicHJvZmlsZUF2YXRhckVkaXQiLCJlZGl0QnV0dG9uIiwiYXZhdGFyRWRpdEFyZWEiLCJhZGRDYXJkQnV0dG9uIiwicG9wdXBFcnJvciIsImdldE1lc3NhZ2UiLCJtZXNzYWdlRmllbGQiLCJtZXNzYWdlIiwiX21lc3NhZ2VGaWVsZCIsImFwaSIsImN1c3RvbUZldGNoIiwiYmFzZVVybCIsImhlYWRlcnMiLCJlcnJvckZ1bmN0aW9uIiwiX2N1c3RvbUZldGNoIiwiX2Vycm9yRnVuY3Rpb24iLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0VXNlckluZm8iLCJ1cGRhdGVVc2VySW5mbyIsInVzZXJEYXRhIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsInNldE5ld0NhcmQiLCJjYXJkRGF0YSIsImNhcmRJZCIsImFkZExpa2UiLCJyZW1vdmVMaWtlIiwic2V0VXNlckF2YXRhciIsImF2YXRhckxpbmsiLCJhdmF0YXIiLCJ1cmwiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiYXV0aG9yaXphdGlvbiIsImVyck1lc3NhZ2UiLCJwcm9maWxlQXZhdGFyRWRpdFNvdXJjZSIsInVzZXJQcm9maWxlIiwidXNlck5hbWVTZWxlY3RvciIsInVzZXJKb2JTZWxlY3RvciIsInVzZXJBdmF0YXJTZWxlY3RvciIsImZvcm1OYW1lSW5wdXQiLCJmb3JtSm9iSW5wdXQiLCJmb3JtQXZhdGFySW5wdXQiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsIl9hdmF0YXJFbGVtZW50IiwiX2Zvcm1OYW1lSW5wdXQiLCJfZm9ybUpvYklucHV0IiwiX2Zvcm1BdmF0YXJJbnB1dCIsInNldFVzZXJJbmZvIiwibmV3VXNlckRhdGEiLCJhdmF0YXJVcmwiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsInVzZXJJZCIsImFsbCIsInVzZXJJbmZvIiwiaW5pdGlhbENhcmRzIiwiY2FyZHNMaXN0IiwicmVuZGVyZXIiLCJwb3B1cEVkaXRQcm9maWxlRm9ybSIsImZpbmFsbHkiLCJlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJwb3B1cEVkaXRBdmF0YXJGb3JtIiwiZWRpdEF2YXRhckZvcm1WYWxpZGF0b3IiLCJpbWFnZVBvcHVwIiwic291cmNlIiwiY2FwdGlvbiIsIl9zb3VyY2UiLCJfY2FwdGlvbiIsIm5ld1BvcHVwSW1hZ2UiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cENhcHRpb24iLCJwb3B1cERlbGV0ZUNhcmQiLCJnZXRUYXNrIiwidGFzayIsInJlbmRlckNhcmQiLCJjYXJkSXRlbSIsInBsYWNlQ2FyZCIsImxpa2VDYXJkIiwicGxhY2VDYXJkRWxlbWVudCIsImFkZEl0ZW0iLCJyZW5kZXJJdGVtIiwiY29udGFpbmVyU2VsZWN0b3IiLCJfcmVuZGVySXRlbSIsIl9jb250YWluZXIiLCJpdGVtcyIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsInBvcHVwQWRkQ2FyZEZvcm0iLCJhZGRDYXJkRm9ybVZhbGlkYXRvciJdLCJzb3VyY2VSb290IjoiIn0=